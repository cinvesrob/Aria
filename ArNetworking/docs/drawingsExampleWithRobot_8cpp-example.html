<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ArNetworking: drawingsExampleWithRobot.cpp</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ArNetworking
   &#160;<span id="projectnumber">dev20141104</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('drawingsExampleWithRobot_8cpp-example.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">drawingsExampleWithRobot.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example showing how to draw custom graphics in clients such as MobileEyes, and enable drawing of sensor readings as well. This is an example server that shows how to draw arbitrary figures in a client (e.g. MobileEyes). It also uses the convenient built-in support for visualization built in to <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html">ArRobot</a>, <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSick.html">ArSick</a>, <a class="elRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSonarDevice.html">ArSonarDevice</a>, etc.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="drawingsExample_8cpp.html">drawingsExample.cpp</a> which does not include robot and sensor drawings</dd></dl>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &quot;Aria.h&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="ArNetworking_8h.html">ArNetworking.h</a>&quot;</span>
<span class="preprocessor">#include &lt;math.h&gt;</span>

<span class="comment">/* These are callbacks that respond to client requests for the drawings&#39; </span>
<span class="comment"> * geometry data. */</span>
<span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>(<a name="_a1"></a><a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a name="a2"></a><a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a name="_a3"></a><a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a4"></a><a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);
<span class="keywordtype">void</span> <a name="a6"></a><a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt);

<span class="keywordtype">int</span> <a name="a7"></a><a class="code" href="clientCommandLister_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
{
  <a name="a8"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#ad99c16b5d947229d9f8e1c5b2d4cdd73">Aria::init</a>();
  <a name="_a9"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html">ArRobot</a> robot;
  <a name="_a10"></a><a class="code" href="classArServerBase.html" title="Base server for all networking services.">ArServerBase</a> server;

  <a name="_a11"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArArgumentParser.html">ArArgumentParser</a> parser(&amp;argc, argv);
  <a name="_a12"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSimpleConnector.html">ArSimpleConnector</a> simpleConnector(&amp;parser);
  <a name="_a13"></a><a class="code" href="classArServerSimpleOpener.html" title="Set up and open an ArNetworking server.">ArServerSimpleOpener</a> simpleOpener(&amp;parser);


  <span class="comment">// parse the command line... fail and print the help if the parsing fails</span>
  <span class="comment">// or if help was requested</span>
  parser.loadDefaultArguments();
  <span class="keywordflow">if</span> (!simpleConnector.parseArgs() || !simpleOpener.parseArgs() || 
      !parser.checkHelpAndWarnUnparsed())
  {    
    simpleConnector.logOptions();
    simpleOpener.logOptions();
    exit(1);
  }

  <span class="comment">// Set up where we&#39;ll look for files such as config file, user/password file,</span>
  <span class="comment">// etc.</span>
  <span class="keywordtype">char</span> fileDir[1024];
  <a name="a14"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArUtil.html#a196eae227f3e6fc7387bb623b4ddea03">ArUtil::addDirectories</a>(fileDir, <span class="keyword">sizeof</span>(fileDir), <a name="a15"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a9cbf9a172cb85275b05d391685f223e0">Aria::getDirectory</a>(), 
                         <span class="stringliteral">&quot;ArNetworking/examples&quot;</span>);

  <span class="comment">// first open the server up</span>
  <span class="keywordflow">if</span> (!simpleOpener.open(&amp;server, fileDir, 240))
  {
    <span class="keywordflow">if</span> (simpleOpener.wasUserFileBad())
      printf(<span class="stringliteral">&quot;Error: Bad user/password/permissions file.\n&quot;</span>);
    <span class="keywordflow">else</span>
      printf(<span class="stringliteral">&quot;Error: Could not open server port. Use -help to see options.\n&quot;</span>);
    exit(1);
  }


  <span class="comment">// Devices</span>
  <a name="_a16"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArAnalogGyro.html">ArAnalogGyro</a> gyro(&amp;robot);

  <a name="_a17"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSonarDevice.html">ArSonarDevice</a> sonarDev;
  robot.<a name="a18"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;sonarDev);

  <a name="_a19"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArIRs.html">ArIRs</a> irs;
  robot.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;irs);

  <a name="_a20"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBumpers.html">ArBumpers</a> bumpers;
  robot.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;bumpers);

  <a name="_a21"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArSick.html">ArSick</a> sick(361, 180);
  robot.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;sick);  
  

  <a name="_a22"></a><a class="code" href="classArServerInfoRobot.html" title="Server component providing basic robot status information to clients.">ArServerInfoRobot</a> serverInfoRobot(&amp;server, &amp;robot);
  <a name="_a23"></a><a class="code" href="classArServerInfoSensor.html" title="Service providing clients with data from range sensors.">ArServerInfoSensor</a> serverInfoSensor(&amp;server, &amp;robot);

  <span class="comment">// This is the service that provides drawing data to the client.</span>
  <a name="_a24"></a><a class="code" href="classArServerInfoDrawings.html" title="Service to provide clients with information about graphical figures to be displayed with the map...">ArServerInfoDrawings</a> drawings(&amp;server);

  <span class="comment">// Convenience function that sets up drawings for all the robot&#39;s current</span>
  <span class="comment">// range devices (using default shape and color info)</span>
  drawings.addRobotsRangeDevices(&amp;robot);

  <span class="comment">// Add our custom drawings</span>
  drawings.addDrawing(
      <span class="comment">//                shape:      color:               size:   layer:</span>
      <span class="keyword">new</span> <a name="_a25"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyLine&quot;</span>, <a name="_a26"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(255, 0, 0),  2,      49),
      <span class="stringliteral">&quot;exampleDrawing_Home&quot;</span>, 
      <span class="keyword">new</span> <a name="_a27"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>)
  );
  drawings.addDrawing(                                    
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyDots&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(0, 255, 0), 250, 48),
      <span class="stringliteral">&quot;exampleDrawing_Dots&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>)
  );
  drawings.addDrawing(
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polySegments&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(0, 0, 0), 4, 52),
      <span class="stringliteral">&quot;exampleDrawing_XMarksTheSpot&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>)
  );
  drawings.addDrawing(
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArDrawingData.html">ArDrawingData</a>(<span class="stringliteral">&quot;polyArrows&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArColor.html">ArColor</a>(255, 0, 255), 500, 100),
      <span class="stringliteral">&quot;exampleDrawing_Arrows&quot;</span>, 
      <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArGlobalFunctor2.html">ArGlobalFunctor2&lt;ArServerClient*, ArNetPacket*&gt;</a>(&amp;<a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>)
  );

  <span class="comment">// modes for moving the robot</span>
  <a name="_a28"></a><a class="code" href="classArServerModeStop.html">ArServerModeStop</a> modeStop(&amp;server, &amp;robot);
  <a name="_a29"></a><a class="code" href="classArServerModeDrive.html">ArServerModeDrive</a> modeDrive(&amp;server, &amp;robot);
  <a name="_a30"></a><a class="code" href="classArServerModeRatioDrive.html">ArServerModeRatioDrive</a> modeRatioDrive(&amp;server, &amp;robot);
  <a name="_a31"></a><a class="code" href="classArServerModeWander.html">ArServerModeWander</a> modeWander(&amp;server, &amp;robot);
  modeStop.addAsDefaultMode();
  modeStop.activate();

  

  <span class="comment">// Connect to the robot.</span>
  <span class="keywordflow">if</span> (!simpleConnector.connectRobot(&amp;robot))
  {
    printf(<span class="stringliteral">&quot;Error: Could not connect to robot... exiting\n&quot;</span>);
    <a name="a32"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a184602a2b3799d61569ec55dd9508450">Aria::shutdown</a>();
    <span class="keywordflow">return</span> 1;
  }

  <span class="comment">// set up the laser before handing it to the laser mode</span>
  simpleConnector.setupLaser(&amp;sick);

  robot.<a name="a33"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#aa3657bebab0086dd14ed0c8c3f76dc8b">enableMotors</a>();

  <span class="comment">// start the robot cycle running in a background thread</span>
  robot.<a name="a34"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a3c3d878cfd11a2ef91230005a83bfcaa">runAsync</a>(<span class="keyword">true</span>);

  <span class="comment">// start the laser processing cycle in a background thread</span>
  sick.runAsync();

  <span class="comment">// connect the laser if it was requested</span>
  <span class="keywordflow">if</span> (!simpleConnector.connectLaser(&amp;sick))
  {
    printf(<span class="stringliteral">&quot;Error: Could not connect to laser... exiting\n&quot;</span>);
    <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a184602a2b3799d61569ec55dd9508450">Aria::shutdown</a>();
    <span class="keywordflow">return</span> 1;
  }

  <span class="comment">// log whatever we wanted to before the runAsync</span>
  simpleOpener.checkAndLog();

  <span class="comment">// run the server thread in the background</span>
  server.<a name="a35"></a><a class="code" href="classArServerBase.html#a93c742ddc58a8f035a0d1b9c1fae4599" title="Runs the server in its own thread.">runAsync</a>();

  printf(<span class="stringliteral">&quot;Server is now running...\n&quot;</span>);


  <span class="comment">// Add a key handler mostly that windows can exit by pressing</span>
  <span class="comment">// escape, note that the key handler prevents you from running this program</span>
  <span class="comment">// in the background on Linux.</span>
  <a name="_a36"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArKeyHandler.html">ArKeyHandler</a> *keyHandler;
  <span class="keywordflow">if</span> ((keyHandler = <a name="a37"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a5b8042b38b19d6a5d3cfbed4df483e67">Aria::getKeyHandler</a>()) == NULL)
  {
    keyHandler = <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArKeyHandler.html">ArKeyHandler</a>;
    <a name="a38"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a9e5496a4ec2c379c8e18706922b57cc1">Aria::setKeyHandler</a>(keyHandler);
    robot.<a name="a39"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a5aecc7ac998c9a31b82fdb904efa8609">lock</a>();
    robot.<a name="a40"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#ab4ea516667d2358f35b435d97b616ab1">attachKeyHandler</a>(keyHandler);
    robot.<a name="a41"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a403d9de010dc2b8d478cd0b14b2d9491">unlock</a>();
    printf(<span class="stringliteral">&quot;To exit, press escape.\n&quot;</span>);
  }

  robot.<a name="a42"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArRobot.html#a95201be7c39b521983b51e6f5d9303e4">waitForRunExit</a>();
 

  <a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classAria.html#a184602a2b3799d61569ec55dd9508450">Aria::shutdown</a>();
  exit(0);  
}




<span class="comment">// Network callbacks for drawings&#39; current geometry data:</span>

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#a7c8ed01400d514a7b9105b92c325f26a">exampleHomeDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* <a class="code" href="configClient_8cpp.html#afe594bfb305907ae82f259409cc214cb">client</a>, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="comment">// 7 Vertices</span>
  reply.<a name="a43"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(7);

  <span class="comment">// Centered on 0,0.</span>
  <span class="comment">// X:                    Y:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  <span class="comment">// Vertex 2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  <span class="comment">// Vertex 3</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 4</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(0);     reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(1000);  <span class="comment">// Vertex 5</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-500);  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 6</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(500);   <span class="comment">// Vertex 7</span>

  client-&gt;<a name="a44"></a><a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#a829cc347fa8f03be4f7e21f52a56b23d">exampleDotsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tik = <a name="a45"></a><a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArUtil.html#ad3496dfd2693d19553a399883a4e20e1">ArUtil::getTime</a>() % 200;
  <span class="keywordtype">double</span> t = tik / 5.0;

  <span class="comment">// Three dots</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3);

  <span class="comment">// Dot 1:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3000);  <span class="comment">// X coordinate (mm)</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t) * 1000));<span class="comment">// Y</span>

  <span class="comment">// Dot 2:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(3500);  <span class="comment">// X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t+500) * 1000));<span class="comment">// Y</span>

  <span class="comment">// Dot 3:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(4000);  <span class="comment">// X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>((<span class="keywordtype">int</span>) (sin(t+1000) * 1000));<span class="comment">// Y</span>

  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#ae35734c611c1c0f5e9bc6287f5eee070">exampleXDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;

  <span class="comment">// X marks the spot. 2 line segments, so 4 vertices:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(4);

  <span class="comment">// Segment 1:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-4250); <span class="comment">// X1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(250);   <span class="comment">// Y1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-3750); <span class="comment">// X2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-250);  <span class="comment">// Y2</span>

  <span class="comment">// Segment 2:</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-4250); <span class="comment">// X1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-250);  <span class="comment">// Y1</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(-3750); <span class="comment">// X2</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(250);   <span class="comment">// Y2</span>
  
  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

<span class="keywordtype">void</span> <a class="code" href="drawingsExample_8cpp.html#abab39eb1a7fa3903841c77dabeb465f9">exampleArrowsDrawingNetCallback</a>(<a class="code" href="classArServerClient.html" title="This class represents the server&#39;s connection to the client, and contains the socket that the server ...">ArServerClient</a>* client, <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a>* requestPkt) {
  <span class="comment">// 1 Arrow that points at the robot</span>
  <a class="code" href="classArNetPacket.html" title="our packet for the network stuff">ArNetPacket</a> reply;
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(1);
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(0);      <span class="comment">// Pos. X</span>
  reply.<a class="codeRef" doxygen="Aria.tag:../../docs/" href="../../docs/classArBasePacket.html#a6ab2c8b1224dc27fc96f22ff8f027e28">byte4ToBuf</a>(700);   <span class="comment">// Pos. Y</span>
  client-&gt;<a class="code" href="classArServerClient.html#a9276b1f38501725852c779058bad1d33" title="Send a packet over UDP (unless client only wants TCP; then sends over TCP).">sendPacketUdp</a>(&amp;reply);
}

</pre></div> </div><!-- contents -->
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Tue Nov 4 2014 09:55:37 for ArNetworking by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
