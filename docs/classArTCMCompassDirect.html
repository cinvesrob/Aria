<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Aria: ArTCMCompassDirect Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Aria
   &#160;<span id="projectnumber">2.9.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classArTCMCompassDirect.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ArTCMCompassDirect Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ArTCMCompassDirect" --><!-- doxytag: inherits="ArTCM2" -->
<p>Talk to a compass directly over a computer serial port.  
 <a href="classArTCMCompassDirect.html#details">More...</a></p>

<p><code>#include &lt;ArTCMCompassDirect.h&gt;</code></p>

<p>Inherits <a class="el" href="classArTCM2.html">ArTCM2</a>.</p>

<p><a href="classArTCMCompassDirect-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfac10ee575b3c9c56bec97ba7d8d9b1"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="acfac10ee575b3c9c56bec97ba7d8d9b1" args="(ArDeviceConnection *devCon)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e96f8a437ff8c0b89c7e704db75832c"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="a7e96f8a437ff8c0b89c7e704db75832c" args="(const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a8467fd6d8705e3a348f079e2b4b58f"></a><!-- doxytag: member="ArTCMCompassDirect::blockingConnect" ref="a5a8467fd6d8705e3a348f079e2b4b58f" args="(unsigned long connectTimeout=5000)" -->
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>blockingConnect</b> (unsigned long connectTimeout=5000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae86ed13fbcae5fa8e76d0e6ddc50f3fe"></a><!-- doxytag: member="ArTCMCompassDirect::commandAutoCalibration" ref="ae86ed13fbcae5fa8e76d0e6ddc50f3fe" args="()" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#ae86ed13fbcae5fa8e76d0e6ddc50f3fe">commandAutoCalibration</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send commands to begin calibrating. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a2419d8c6fdcca39494a579e698549cf9">commandJustCompass</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61" title="Send commands to start/stop sending data.">commandContinuousPackets()</a> in this implementation.  <a href="#a2419d8c6fdcca39494a579e698549cf9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#aae038b6b57851fbf2aed64cd0c08d872">commandSoftReset</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Not implemented yet.  <a href="#aae038b6b57851fbf2aed64cd0c08d872"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c53aa53dcefeab97cc94922656a0911"></a><!-- doxytag: member="ArTCMCompassDirect::commandStopCalibration" ref="a1c53aa53dcefeab97cc94922656a0911" args="()" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>commandStopCalibration</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac7d2dec5fefcc131234af1b54819d23e"></a><!-- doxytag: member="ArTCMCompassDirect::commandUserCalibration" ref="ac7d2dec5fefcc131234af1b54819d23e" args="()" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>commandUserCalibration</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a62383530bc16af4d2b923ebfbc98faa6">connect</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Open device connection if not yet open and send commands to configure compass.  <a href="#a62383530bc16af4d2b923ebfbc98faa6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3b610e397855e0eb59db24a6fb6d43b"></a><!-- doxytag: member="ArTCMCompassDirect::getDeviceConnetion" ref="ad3b610e397855e0eb59db24a6fb6d43b" args="()" -->
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>getDeviceConnetion</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd">read</a> (unsigned int msWait=1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read all available data, store, and call callbacks if any were added.  <a href="#aebe52e5b8f1cdeca50c99e95e656dbcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a915890f7feead12c8b6d4f8876685f51"></a><!-- doxytag: member="ArTCMCompassDirect::setDeviceConnection" ref="a915890f7feead12c8b6d4f8876685f51" args="(ArDeviceConnection *devCon)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setDeviceConnection</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61">commandContinuousPackets</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send commands to start/stop sending data.  <a href="#a9c392ac0c9968c0f9cdac57c547ebf61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b941b2fd233837373fceef192e0f1df"></a><!-- doxytag: member="ArTCMCompassDirect::commandOnePacket" ref="a2b941b2fd233837373fceef192e0f1df" args="()" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>commandOnePacket</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad10db749a3dbbb995adf91ef2cd421e8"></a><!-- doxytag: member="ArTCMCompassDirect::commandOff" ref="ad10db749a3dbbb995adf91ef2cd421e8" args="()" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>commandOff</b> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Talk to a compass directly over a computer serial port. </p>
<p>This class configures and recieves compass heading data from a TCM2 or TCM2.5 compass directly over a computer serial port, rather than via tha robot. This class cannot recieve pitch, roll or temperature data from the compass. On all Pioneer robots, the TCM compass (as originally installed by MobileRobots) is connected to the robot microcontroller, so if you have a Pioneer with this configuration, you should instead use the <a class="el" href="classArTCMCompassRobot.html" title="Interface to a TCM 2/2.5/2.6 3-axis compass through the robot microcontroller.">ArTCMCompassRobot</a> class. Only use this class if you have connected the compass to the computer serial port.</p>
<p>You can create an instance of this class directly, or using an <a class="el" href="classArCompassConnector.html" title="Use this class to create an instance of a TCM2 subclass and connect to the device based on program co...">ArCompassConnector</a> object and giving the "-compassType serialtcm" program argument.</p>
<p>If you create your own <a class="el" href="classArTCMCompassDirect.html" title="Talk to a compass directly over a computer serial port.">ArTCMCompassDirect</a> object, you must call the <a class="el" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd" title="Read all available data, store, and call callbacks if any were added.">read()</a> method periodically (ideally at the same rate the compass sends data, approx. 8 hz by default) to read and parse incoming data. You can use an <a class="el" href="classArRobot.html" title="Central class for communicating with and operating the robot.">ArRobot</a> callback to do this, for example: </p>
<div class="fragment"><pre class="fragment">    <a class="code" href="classArRetFunctor1C.html" title="Functor for a member function with return value and 1 parameter.">ArRetFunctor1C&lt;int, ArTCMCompassDirect, unsigned int&gt;</a> compassReadFunc(myCompass, &amp;<a class="code" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd" title="Read all available data, store, and call callbacks if any were added.">ArTCMCompassDirect::read</a>, 10);
    myRobot-&gt;addSensorInterpTask(<span class="stringliteral">&quot;ArTCMCompassDirect read&quot;</span>, 200, &amp;compassReadFunc);
</pre></div><p>If you use <a class="el" href="classArCompassConnector.html" title="Use this class to create an instance of a TCM2 subclass and connect to the device based on program co...">ArCompassConnector</a>, however, it will automatically do this. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9c392ac0c9968c0f9cdac57c547ebf61"></a><!-- doxytag: member="ArTCMCompassDirect::commandContinuousPackets" ref="a9c392ac0c9968c0f9cdac57c547ebf61" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61">ArTCMCompassDirect::commandContinuousPackets</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send commands to start/stop sending data. </p>

<p>Implements <a class="el" href="classArTCM2.html#a8b57b5ac6e217d7494cc72cfae61f171">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="a2419d8c6fdcca39494a579e698549cf9"></a><!-- doxytag: member="ArTCMCompassDirect::commandJustCompass" ref="a2419d8c6fdcca39494a579e698549cf9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classArTCMCompassDirect.html#a2419d8c6fdcca39494a579e698549cf9">ArTCMCompassDirect::commandJustCompass</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Same as <a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61" title="Send commands to start/stop sending data.">commandContinuousPackets()</a> in this implementation. </p>

<p>Implements <a class="el" href="classArTCM2.html#af1af3c0170ed4c7a63fa6d00ce4a8d6b">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="aae038b6b57851fbf2aed64cd0c08d872"></a><!-- doxytag: member="ArTCMCompassDirect::commandSoftReset" ref="aae038b6b57851fbf2aed64cd0c08d872" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classArTCMCompassDirect.html#aae038b6b57851fbf2aed64cd0c08d872">ArTCMCompassDirect::commandSoftReset</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Not implemented yet. </p>

<p>Implements <a class="el" href="classArTCM2.html#a932f31b8962d13d634e79b74337e817b">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="a62383530bc16af4d2b923ebfbc98faa6"></a><!-- doxytag: member="ArTCMCompassDirect::connect" ref="a62383530bc16af4d2b923ebfbc98faa6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArTCMCompassDirect.html#a62383530bc16af4d2b923ebfbc98faa6">ArTCMCompassDirect::connect</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open device connection if not yet open and send commands to configure compass. </p>

<p>Reimplemented from <a class="el" href="classArTCM2.html#aadac4c6e5254827cc598dbfab7e671fe">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="aebe52e5b8f1cdeca50c99e95e656dbcd"></a><!-- doxytag: member="ArTCMCompassDirect::read" ref="aebe52e5b8f1cdeca50c99e95e656dbcd" args="(unsigned int msWait=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd">ArTCMCompassDirect::read</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msWait</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read all available data, store, and call callbacks if any were added. </p>
<p>unsigned int msWait If 0, wait indefinately for new data. Otherwise, wait a maximum of this many milliseconds for data to arrive. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value &gt; 0 if messages were recieved from the compass, 0 if no data was recieved, and a value &lt; 0 on error reading from the compass. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ArTCMCompassDirect.h</li>
<li>ArTCMCompassDirect.cpp</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classArTCMCompassDirect.html">ArTCMCompassDirect</a>      </li>

    <li class="footer">Generated on Tue Nov 4 2014 09:55:45 for Aria by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
